@PACKAGE_INIT@

MESSAGE(STATUS ${CMAKE_CURRENT_LIST_DIR})
find_package(shiva CONFIG REQUIRED)
include("${CMAKE_CURRENT_LIST_DIR}/shiva-shiva-system-sfml-resources-targets.cmake")
include("${CMAKE_CURRENT_LIST_DIR}/shiva-shiva-system-sfml-graphics-targets.cmake")
include("${CMAKE_CURRENT_LIST_DIR}/shiva-shiva-system-sfml-inputs-targets.cmake")

macro(import_plugin plugin_name)
    if(CMAKE_BUILD_TYPE MATCHES Debug)
        get_property(result TARGET ${plugin_name} PROPERTY IMPORTED_LOCATION_DEBUG)
    else()
        get_property(result TARGET ${plugin_name} PROPERTY IMPORTED_LOCATION_RELEASE)
    endif()

    get_filename_component(result_filename ${result} NAME)

    message(STATUS "plugin to copy -> ${result}")
    message(STATUS "plugin filename to copy -> ${result_filename}")

    configure_file(${result}
            ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/${result_filename}
            COPYONLY)
endmacro()

##! directory output plugins
set(SAVE_OUTPUT_DIRECTORY "${CMAKE_LIBRARY_OUTPUT_DIRECTORY}")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin/systems)

import_plugin(shiva::shiva-system-sfml-resources)
import_plugin(shiva::shiva-system-sfml-graphics)
import_plugin(shiva::shiva-system-sfml-inputs)

##! restore output plugins
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${SAVE_OUTPUT_DIRECTORY}")

##! check components
check_required_components("shiva-system-sfml-resources")
check_required_components("shiva-system-sfml-graphics")
check_required_components("shiva-system-sfml-input")

